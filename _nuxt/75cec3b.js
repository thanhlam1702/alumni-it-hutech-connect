(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1254:function(t,e,n){"use strict";n.r(e);n(65),n(66),n(85),n(36);var o=n(16),r={props:{isvisible:{type:Boolean},url:{type:String,default:"/decks"}},data:function(){return{visible:!1,loading:!1,isDisable:!0,listImg:[]}},watch:{isvisible:function(){this.isvisible?this.visible=!0:this.visible=!1}},methods:{changeText:function(t){""!==t.target.innerHTML||0!==this.listImg.length?(document.querySelector(".content .placeholder").classList.add("hidden"),this.isDisable=!1):(document.querySelector(".content .placeholder").classList.remove("hidden"),this.isDisable=!0)},handleCancel:function(t){this.$emit("handdleCancelModal")},submit:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,content;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,n=new FormData,content=document.querySelector(".content__text").innerHTML,n.append("content",content),t.listImg.forEach((function(t){n.append("image",t)})),e.prev=5,e.next=8,t.$axios.$post("https://hutech-alumnni-social.herokuapp.com"+"".concat(t.url),n);case 8:!0===e.sent.success&&(document.querySelector(".content__text").innerHTML="",t.listImg=[],t.$emit("handdleCancelModal"),t.$emit("fetchData")),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(5);case 14:t.loading=!1;case 15:case"end":return e.stop()}}),e,null,[[5,12]])})))()},onChange:function(t){var e=this;"done"===t.file.status&&t.fileList.forEach((function(t,n){e.listImg[n]=t.originFileObj})),"removed"===t.file.status&&(this.listImg=this.listImg.filter((function(img){return img.uid!==t.file.originFileObj.uid}))),0!==this.listImg.length||""!==document.querySelector(".content__text").innerHTML?this.isDisable=!1:this.isDisable=!0}}},c=n(20),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-modal",{staticClass:"modal-post",attrs:{title:"Đăng bài"},on:{cancel:t.handleCancel},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("template",{slot:"footer"},[n("a-button",{key:"submit",staticStyle:{width:"100%"},attrs:{type:"primary",loading:t.loading,disabled:t.isDisable},on:{click:t.submit}},[t._v("\n      Đăng\n    ")])],1),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"placeholder"},[t._v("Ae")]),t._v(" "),n("div",{staticClass:"content__text",attrs:{contenteditable:"true"},on:{input:t.changeText}}),t._v(" "),n("a-upload",{staticClass:"img-upload",attrs:{"list-type":"picture-card",accept:".jpg, .jpeg, .png",multiple:!0},on:{change:t.onChange}},[n("div",[n("a-icon",{attrs:{type:"upload"}}),t._v(" "),n("div",{staticClass:"ant-upload-text"},[t._v("Tải ảnh lên")])],1)])],1)],2)}),[],!1,null,null,null);e.default=component.exports},1257:function(t,e,n){t.exports=n.p+"img/default_group.8286ef5.png"},1285:function(t,e,n){"use strict";n.r(e);n(36);var o=n(16),r={props:{posts:{type:Array,default:null}},data:function(){return{idPost:null,flagModal:!1,flickityOptions:{initialIndex:0,prevNextButtons:!1,pageDots:!1,wrapAround:!0,autoPlay:4e3,lazyLoad:2}}},watch:{flagModal:function(){document.querySelector(".modal__item.close").addEventListener("click",(function(){var t=document.querySelector(".modal-contain");document.querySelector("body").removeChild(t)}));var t=this;document.querySelector(".modal__item.link").addEventListener("click",(function(){t.$router.push("/groups/post/".concat(t.idPost)),t.closeModal()})),document.querySelector(".modal__item.save").addEventListener("click",(function(){t.onSavePost(),t.closeModal()}))}},methods:{fetchLike:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,n.$axios.$get("https://hutech-alumnni-social.herokuapp.com/groups/deck/"+t);case 3:r=o.sent,n.posts[e].like=r.deck.like,o.next=9;break;case 7:o.prev=7,o.t0=o.catch(0);case 9:case"end":return o.stop()}}),o,null,[[0,7]])})))()},onLike:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,n.$axios.$post("https://hutech-alumnni-social.herokuapp.com/decks/group/"+t);case 3:o.sent.success&&n.fetchLike(t,e),o.next=9;break;case 7:o.prev=7,o.t0=o.catch(0);case 9:case"end":return o.stop()}}),o,null,[[0,7]])})))()},openModal:function(t){this.idPost=t;var e=document.createElement("div");e.classList="modal-contain",document.querySelector("body").appendChild(e),e.innerHTML='\n        <div class="modal">\n          <div class="modal__item link">\n            Đi đến bài biết\n          </div>\n          <div class="modal__item save">Lưu bài viết</div>\n          <div class="modal__item close">Hủy</div>\n        </div>',this.flagModal=!this.flagModal},onSavePost:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$post("https://hutech-alumnni-social.herokuapp.com"+"/api/auth/user/".concat(t.idPost));case 3:!0===e.sent.success&&t.$notification.success({message:"Lưu thành công"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},closeModal:function(){var t=document.querySelector(".modal-contain");document.querySelector("body").removeChild(t)}}},c=n(20),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"posts"},t._l(t.posts,(function(e,o){return n("div",{key:e._id,staticClass:"posts__item"},[n("div",{staticClass:"posts__item-user"},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:e.avatar,alt:""}})]),t._v(" "),n("div",{staticClass:"name"},[n("nuxt-link",{attrs:{to:"/user/"+e.owner}},[t._v("\n          "+t._s(e.fullName?e.owner.fullName:e.name)+"\n        ")])],1),t._v(" "),n("div",{staticClass:"control",on:{click:function(n){return t.openModal(e._id)}}},[n("span"),t._v(" "),n("span"),t._v(" "),n("span")])]),t._v(" "),n("div",{staticClass:"posts__item-content",domProps:{innerHTML:t._s(e.content)}}),t._v(" "),0!==e.image.length?n("client-only",[n("Flickity",{ref:"flickity",refInFor:!0,staticClass:"slide",attrs:{options:t.flickityOptions}},t._l(e.image,(function(img,t){return n("div",{key:t,staticClass:"slide__item"},[n("div",{staticClass:"slide__item-img"},[n("img",{attrs:{src:img,alt:""}})])])})),0)],1):t._e(),t._v(" "),0!==e.like.length?n("div",{staticClass:"posts__item-count"},[t._v("\n      "+t._s(e.like.length)+" lượt thích\n    ")]):t._e(),t._v(" "),n("div",{staticClass:"posts__item-control"},[-1===e.like.indexOf(t._self.$store.state.user._id)?n("div",{staticClass:"like",on:{click:function(n){return t.onLike(e._id,o)}}},[n("a-icon",{attrs:{type:"like"}}),t._v("\n        Thích\n      ")],1):n("div",{staticClass:"like is-like",on:{click:function(n){return t.onLike(e._id,o)}}},[n("a-icon",{attrs:{type:"like",theme:"filled"}}),t._v("\n        Thích\n      ")],1),t._v(" "),n("div",{staticClass:"comment"},[n("nuxt-link",{attrs:{to:"/groups/post/"+e._id}},[t._v("Bình luận")])],1)])],1)})),0)}),[],!1,null,null,null);e.default=component.exports},1321:function(t,e,n){t.exports=n.p+"img/log-out.2655160.svg"},1361:function(t,e,n){"use strict";n.r(e);var o=[function(){var t=this.$createElement,e=this._self._c||t;return e("i",{staticClass:"icon"},[e("img",{attrs:{src:n(1321),alt:""}})])}],r=(n(36),n(16)),c=n(1285),l=n(1254),d={components:{PostCardGroup:c.default,PostModal:l.default},asyncData:function(t){var e=t.$axios,n=t.params;return e.$get("https://hutech-alumnni-social.herokuapp.com/groups/"+n.id).then((function(data){return{group:data.groups,groupPosts:data.groups.decks.reverse()}})).catch((function(t){}))},data:function(){return{group:null,groupPosts:null,modalPost:!1}},mounted:function(){var t=document.querySelector(".dropmore");document.addEventListener("click",(function(e){e.preventDefault(),t.classList.remove("active")}))},methods:{handdleCancelModal:function(){this.modalPost=!1},activeDropmore:function(){event.stopPropagation(),document.querySelector(".dropmore").classList.toggle("active")},onOutGroup:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$post("https://hutech-alumnni-social.herokuapp.com/groups/"+t.$route.params.id);case 3:if(!e.sent.success){e.next=8;break}return e.next=7,t.$store.dispatch("getUser");case 7:t.$router.push("/groups");case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))()},fectData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("https://hutech-alumnni-social.herokuapp.com/groups/"+t.$route.params.id);case 2:n=e.sent,t.group=n.groups,t.groupPosts=n.groups.decks.reverse();case 5:case"end":return e.stop()}}),e)})))()}}},v=n(20),component=Object(v.a)(d,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"main-wrapper group"},[o("section",{staticClass:"content"},[o("div",{staticClass:"container"},[o("div",{staticClass:"group-contain"},[o("div",{staticClass:"group__left"},[o("div",{staticClass:"group__left-title detail-title"},[o("div",{staticClass:"avatar"},[t.group.image?o("img",{attrs:{src:t.group.image,alt:""}}):o("img",{attrs:{src:n(1257),alt:""}})]),t._v(" "),o("div",{staticClass:"name"},[t._v(t._s(t.group.name))]),t._v(" "),o("div",{staticClass:"control",on:{click:t.activeDropmore}},[o("span"),t._v(" "),o("span"),t._v(" "),o("span")]),t._v(" "),o("div",{staticClass:"dropmore"},[o("div",{staticClass:"dropmore__item",on:{click:t.onOutGroup}},[t._m(0),t._v(" "),o("span",[t._v("Rời khỏi nhóm")])])])]),t._v(" "),o("div",{staticClass:"group__left-info"},[o("div",{staticClass:"title"},[t._v("Giới thiệu")]),t._v(" "),o("div",{staticClass:"description"},[t._v(t._s(t.group.description))]),t._v(" "),o("div",{staticClass:"amount-user"},[o("b",[t._v(t._s(t.group.users.length))]),t._v(" thành viên\n            ")]),t._v(" "),o("div",{staticClass:"amount-post"},[o("b",[t._v(t._s(t.group.decks.length))]),t._v(" bài viết\n            ")])])]),t._v(" "),o("div",{staticClass:"group__right"},[o("div",{staticClass:"group__right-post"},[o("div",{staticClass:"avatar"},[void 0!==this.$store.getters.user.avatar?o("img",{attrs:{src:this.$store.getters.user.avatar,alt:""}}):o("img",{attrs:{src:n(676),alt:""}})]),t._v(" "),o("div",{staticClass:"post-box",on:{click:function(e){t.modalPost=!0}}},[t._v("Ae")]),t._v(" "),o("PostModal",{attrs:{isvisible:t.modalPost,url:"/groups/decks/"+t.group._id},on:{handdleCancelModal:t.handdleCancelModal,fetchData:t.fectData}})],1),t._v(" "),o("PostCardGroup",{attrs:{posts:t.groupPosts}})],1)])])])])}),o,!1,null,null,null);e.default=component.exports;installComponents(component,{PostModal:n(1254).default,PostCardGroup:n(1285).default})}}]);