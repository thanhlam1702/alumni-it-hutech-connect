(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1282:function(t,e,n){"use strict";n.r(e);n(36);var o=n(16),c={props:{posts:{type:Array,default:null}},data:function(){return{idPost:null,flagModal:!1,flickityOptions:{initialIndex:0,prevNextButtons:!1,pageDots:!1,wrapAround:!0,autoPlay:4e3,lazyLoad:2}}},watch:{flagModal:function(){document.querySelector(".modal__item.close").addEventListener("click",(function(){var t=document.querySelector(".modal-contain");document.querySelector("body").removeChild(t)}));var t=this;document.querySelector(".modal__item.link").addEventListener("click",(function(){t.$router.push("/posts/".concat(t.idPost)),t.closeModal()})),document.querySelector(".modal__item.save").addEventListener("click",(function(){t.onSavePost(),t.closeModal()}))}},methods:{fetchLike:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var c;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,n.$axios.$get("https://hutech-alumnni-social.herokuapp.com/decks/"+t);case 3:c=o.sent,n.posts[e].like=c.deck.like,o.next=9;break;case 7:o.prev=7,o.t0=o.catch(0);case 9:case"end":return o.stop()}}),o,null,[[0,7]])})))()},onLike:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,n.$axios.$post("https://hutech-alumnni-social.herokuapp.com/decks/"+t);case 3:o.sent.success&&n.fetchLike(t,e),o.next=9;break;case 7:o.prev=7,o.t0=o.catch(0);case 9:case"end":return o.stop()}}),o,null,[[0,7]])})))()},openModal:function(t){this.idPost=t;var e=document.createElement("div");e.classList="modal-contain",document.querySelector("body").appendChild(e),e.innerHTML='\n        <div class="modal">\n          <div class="modal__item link">\n            Đi đến bài biết\n          </div>\n          <div class="modal__item save">Lưu bài viết</div>\n          <div class="modal__item close">Hủy</div>\n        </div>',this.flagModal=!this.flagModal},onSavePost:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$post("https://hutech-alumnni-social.herokuapp.com"+"/api/auth/user/".concat(t.idPost));case 3:if(!0!==e.sent.success){e.next=8;break}return e.next=7,t.$store.dispatch("getUser");case 7:t.$notification.success({message:"Lưu thành công"});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},closeModal:function(){var t=document.querySelector(".modal-contain");document.querySelector("body").removeChild(t)}}},r=n(20),component=Object(r.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"posts"},t._l(t.posts,(function(e,o){return n("div",{key:e._id,staticClass:"posts__item"},[n("div",{staticClass:"posts__item-user"},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:e.owner.avatar,alt:""}})]),t._v(" "),n("div",{staticClass:"name"},[n("nuxt-link",{attrs:{to:"/user/"+e.owner._id}},[t._v("\n          "+t._s(e.owner.fullName?e.owner.fullName:e.owner.name)+"\n        ")])],1),t._v(" "),n("div",{staticClass:"control",on:{click:function(n){return t.openModal(e._id)}}},[n("span"),t._v(" "),n("span"),t._v(" "),n("span")])]),t._v(" "),n("div",{staticClass:"posts__item-content",domProps:{innerHTML:t._s(e.content)}}),t._v(" "),0!==e.image.length?n("client-only",[n("Flickity",{ref:"flickity",refInFor:!0,staticClass:"slide",attrs:{options:t.flickityOptions}},t._l(e.image,(function(img,t){return n("div",{key:t,staticClass:"slide__item"},[n("div",{staticClass:"slide__item-img"},[n("img",{attrs:{src:img,alt:""}})])])})),0)],1):t._e(),t._v(" "),0!==e.like.length?n("div",{staticClass:"posts__item-count"},[t._v("\n      "+t._s(e.like.length)+" lượt thích\n    ")]):t._e(),t._v(" "),n("div",{staticClass:"posts__item-control"},[-1===e.like.indexOf(t._self.$store.state.user._id)?n("div",{staticClass:"like",on:{click:function(n){return t.onLike(e._id,o)}}},[n("a-icon",{attrs:{type:"like"}}),t._v("\n        Thích\n      ")],1):n("div",{staticClass:"like is-like",on:{click:function(n){return t.onLike(e._id,o)}}},[n("a-icon",{attrs:{type:"like",theme:"filled"}}),t._v("\n        Thích\n      ")],1),t._v(" "),n("div",{staticClass:"comment"},[n("nuxt-link",{attrs:{to:"/posts/"+e._id}},[t._v("Bình luận")])],1)])],1)})),0)}),[],!1,null,null,null);e.default=component.exports},1336:function(t,e,n){"use strict";n.r(e);var o={components:{PostCard:n(1282).default},asyncData:function(t){return t.app.$axios.$get("https://hutech-alumnni-social.herokuapp.com/decks").then((function(data){return{posts:data.decks.reverse()}})).catch((function(t){}))},data:function(){return{posts:null}},methods:{scrollTop:function(){window.scrollTo(0,0)}},head:function(){return{title:"Bài viết | Alumni IT Hutech"}},layout:"default"},c=n(20),component=Object(c.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main-wrapper main"},[e("div",{staticClass:"container"},[e("div",{staticClass:"main-post"},[e("PostCard",{attrs:{posts:this.posts}})],1),this._v(" "),e("div",{staticClass:"back-top",on:{click:this.scrollTop}},[e("a-icon",{attrs:{type:"up"}})],1)])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{PostCard:n(1282).default})}}]);