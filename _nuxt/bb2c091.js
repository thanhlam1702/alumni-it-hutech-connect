(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1256:function(t,e,r){"use strict";r.r(e);var n=r(20),component=Object(n.a)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nav"},[e("ul",{staticClass:"nav__options"},[e("li",{staticClass:"nav__options-item"},[e("nuxt-link",{attrs:{to:"/profile/edit"}},[this._v("Chỉnh sửa trang cá nhân")])],1),this._v(" "),e("li",{staticClass:"nav__options-item"},[e("nuxt-link",{attrs:{to:"/profile/change-password"}},[this._v("Đổi mật khẩu")])],1)])])}),[],!1,null,null,null);e.default=component.exports},1293:function(t,e,r){t.exports=r.p+"img/camera-black.0b53b6c.svg"},1348:function(t,e,r){"use strict";r.r(e);var n=[function(){var t=this.$createElement,e=this._self._c||t;return e("i",{staticClass:"icon"},[e("img",{attrs:{src:r(1293),alt:"Alumni It Hutech Connect"}})])}],o=(r(40),r(36),r(16)),l={components:{NavOption:r(1256).default},data:function(){return{loadingBtn:!1,modelStatus:!1,seclectedFile:null,fileName:null,form:{fullName:void 0===this.$store.getters.user.fullName?null:this.$store.getters.user.fullName,name:void 0===this.$store.getters.user.name?null:this.$store.getters.user.name,email:void 0===this.$store.getters.user.email?null:this.$store.getters.user.email,yearID:void 0===this.$store.getters.user.yearID?null:this.$store.getters.user.yearID,address:void 0===this.$store.getters.user.address?null:this.$store.getters.user.address,role:void 0===this.$store.getters.user.role?null:this.$store.getters.user.role,phone:void 0===this.$store.getters.user.phone?null:this.$store.getters.user.phone,gender:void 0===this.$store.getters.user.gender?null:this.$store.getters.user.gender,background:void 0===this.$store.getters.user.background?null:this.$store.getters.user.background,avatar:void 0===this.$store.getters.user.avatar?null:this.$store.getters.user.avatar}}},methods:{onSubmit:function(data){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$put("https://hutech-alumnni-social.herokuapp.com/api/auth/user",t.form);case 3:if(!e.sent.success){e.next=9;break}return e.next=7,t.$store.dispatch("getUser");case 7:t.$notification.success({message:"Lưu thành công"}),t.$router.push("/profile");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t.$notification.error({message:"Lưu không thành công"});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},onCancle:function(){this.$router.push("/profile")},showModal:function(){this.modelStatus=!0},onChange:function(t){"done"===t.file.status&&(this.seclectedFile=t.file.originFileObj,this.fileName=t.file.originFileObj.name)},onChangeAvatar:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new FormData).append("image",e.seclectedFile,e.fileName),t.prev=2,e.loadingBtn=!0,t.next=6,e.$axios.$put("https://hutech-alumnni-social.herokuapp.com/api/auth/user",r);case 6:t.sent.success&&(e.fetAvatar(),e.modelStatus=!1,e.loadingBtn=!1),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),e.loadingBtn=!1;case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))()},fetAvatar:function(){this.$store.dispatch("getUser")},handleCancel:function(){this.modelStatus=!1}}},c=r(20),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"main-wrapper edit-profile"},[n("section",{staticClass:"container content-profile pd-profile"},[n("NavOption"),t._v(" "),n("div",{staticClass:"profile"},[n("div",{staticClass:"profile__user"},[n("div",{staticClass:"profile__user-avatar"},[n("div",{staticClass:"img"},[void 0!==this.$store.getters.user.avatar?n("img",{attrs:{src:this.$store.getters.user.avatar,alt:""}}):n("img",{attrs:{src:r(676),alt:""}})]),t._v(" "),n("div",{staticClass:"change-avatar",on:{click:t.showModal}},[t._m(0)]),t._v(" "),n("a-modal",{attrs:{title:"Thay đổi avatar"},model:{value:t.modelStatus,callback:function(e){t.modelStatus=e},expression:"modelStatus"}},[n("a-upload-dragger",{attrs:{accept:".jpg, .jpeg, .png"},on:{change:t.onChange}},[n("a-button",[n("a-icon",{attrs:{type:"upload"}}),t._v("Tải ảnh lên ")],1)],1),t._v(" "),n("template",{slot:"footer"},[n("a-button",{key:"back",on:{click:t.handleCancel}},[t._v(" Hủy bỏ ")]),t._v(" "),n("a-button",{key:"submit",attrs:{type:"primary",loading:t.loadingBtn},on:{click:t.onChangeAvatar}},[t._v("\n                Lưu\n              ")])],1)],2)],1),t._v(" "),n("div",{staticClass:"profile__user-name"},[t._v("\n          "+t._s(null!==t.form.fullName?t.form.fullName:t.form.name)+"\n        ")])]),t._v(" "),n("div",{staticClass:"profile__info"},[n("a-form-model",{attrs:{model:t.form}},[n("div",{staticClass:"profile__info-item"},[n("div",{staticClass:"title"},[n("label",{attrs:{for:""}},[t._v("Họ & tên:")])]),t._v(" "),n("a-input",{staticClass:"info",model:{value:t.form.fullName,callback:function(e){t.$set(t.form,"fullName",e)},expression:"form.fullName"}})],1),t._v(" "),n("div",{staticClass:"profile__info-item"},[n("div",{staticClass:"title"},[n("label",{attrs:{for:""}},[t._v("Tài khoản:")])]),t._v(" "),n("a-input",{staticClass:"info",attrs:{"read-only":""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("div",{staticClass:"profile__info-item"},[n("div",{staticClass:"title"},[n("label",{attrs:{for:""}},[t._v("MSSV:")])]),t._v(" "),n("a-input",{staticClass:"info",model:{value:t.form.yearID,callback:function(e){t.$set(t.form,"yearID",e)},expression:"form.yearID"}})],1),t._v(" "),n("div",{staticClass:"profile__info-item"},[n("div",{staticClass:"title"},[n("label",{attrs:{for:""}},[t._v("Email:")])]),t._v(" "),n("a-input",{staticClass:"info",attrs:{"read-only":""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),n("div",{staticClass:"profile__info-item"},[n("div",{staticClass:"title"},[n("label",{attrs:{for:""}},[t._v("Địa chỉ:")])]),t._v(" "),n("a-input",{staticClass:"info",attrs:{value:""},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),t._v(" "),n("div",{staticClass:"profile__info-item"},[n("div",{staticClass:"title"},[n("label",{attrs:{for:""}},[t._v("Role:")])]),t._v(" "),n("a-input",{staticClass:"info",model:{value:t.form.role,callback:function(e){t.$set(t.form,"role",e)},expression:"form.role"}})],1),t._v(" "),n("div",{staticClass:"profile__info-item"},[n("div",{staticClass:"title"},[n("label",{attrs:{for:""}},[t._v("Di động:")])]),t._v(" "),n("a-input",{staticClass:"info",model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),t._v(" "),n("div",{staticClass:"profile__info-item"},[n("div",{staticClass:"title"},[n("label",{attrs:{for:""}},[t._v("Giới tính:")])]),t._v(" "),n("a-input",{staticClass:"info",model:{value:t.form.gender,callback:function(e){t.$set(t.form,"gender",e)},expression:"form.gender"}})],1),t._v(" "),n("div",{staticClass:"profile__info-item button"},[n("a-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("\n              Lưu thay đổi\n            ")]),t._v(" "),n("a-button",{on:{click:t.onCancle}},[t._v(" Hủy bỏ ")])],1)])],1)])],1)])}),n,!1,null,null,null);e.default=component.exports;installComponents(component,{NavOption:r(1256).default})}}]);